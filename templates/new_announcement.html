{% extends "layout.html" %}

{% block title %}New Announcement{% endblock %}

{% block main %}
  <div class="page-header">
    <div>
      <h1>{% if edit_mode %}Edit Announcement{% else %}Post New Announcement{% endif %}</h1>
      <p class="page-subtitle mb-0">Share news with your clubs or globally</p>
    </div>
  </div>

  <div class="row justify-content-center">
    <div class="col-lg-8 col-xl-7">
      <section class="card">
        <div class="card-body">
          <form action="{% if edit_mode %}/announcements/{{ announcement.id }}/edit{% else %}/announcements/new{% endif %}" method="post">
            <input type="hidden" name="_csrf_token" value="{{ csrf_token }}">
            <div class="form-group">
              <label class="form-label" for="title">Title</label>
              <input id="title" class="form-control" name="title" placeholder="e.g., Important Update" value="{{ announcement.title if announcement else '' }}" required>
              <small class="muted">Keep it short and clear</small>
            </div>

            <div class="form-group">
              <label class="form-label" for="club">Club (leave as Global if you are a site admin)</label>
              <select class="form-select" id="club" name="club_id">
                {% if is_global_admin %}
                  <option value="">Global announcement</option>
                {% else %}
                  <option value="">Select a club</option>
                {% endif %}
                {% for c in manageable_clubs %}
                  <option value="{{ c.id }}" {% if announcement and announcement.club_id == c.id %}selected{% endif %}>{{ c.name }}</option>
                {% endfor %}
              </select>
              <small class="muted">You can post to clubs you manage announcements for.</small>
            </div>

            <div class="form-group">
              <label class="form-label" for="body">Message</label>
              <textarea id="body" class="form-control" name="body" placeholder="Write your announcement here..." rows="6" required>{{ announcement.body if announcement else '' }}</textarea>
              <small class="muted">Be clear and informative</small>
            </div>

            <div class="d-grid gap-2 mt-4">
              <button class="btn btn-primary" type="submit">{% if edit_mode %}Save Changes{% else %}Post Announcement{% endif %}</button>
              <a href="/announcements" class="btn btn-outline">Cancel</a>
            </div>
          </form>
        </div>
      </section>
    </div>
  </div>
{% endblock %}
