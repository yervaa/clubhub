{% extends "layout.html" %}

{% block title %}Attendance - {{ event.title }}{% endblock %}

{% block main %}
  <div class="page-header">
    <div>
      <h1>Attendance for "{{ event.title }}"</h1>
      <p class="page-subtitle mb-0">
        ğŸ“… {{ event.start_time | format_datetime }}
        {% if event.location %}
          â€¢ ğŸ“ {{ event.location }}
        {% endif %}
      </p>
    </div>
  </div>

  <section class="card">
    <div class="card-header">
      <h3 class="mb-0">Select members who attended</h3>
    </div>
    <div class="card-body">
      <form action="/events/{{ event.id }}/attendance" method="post">
        <input type="hidden" name="_csrf_token" value="{{ csrf_token }}">
        <div class="list-group list-group-sm">
          {% for u in users %}
            <label class="list-group-item d-flex gap-3 align-items-center">
              <input
                class="form-check-input mt-0"
                type="checkbox"
                name="attended"
                value="{{ u.id }}"
                {% if u.id in attended_ids %}checked{% endif %}
              >
              <div class="w-100">
                <span class="fw-bold">{{ u.username }}</span>
              </div>
            </label>
          {% endfor %}
        </div>

        <div class="mt-4 d-grid gap-2">
          <button class="btn btn-success" type="submit">âœ“ Save Attendance</button>
          <a href="/events" class="btn btn-outline">Cancel</a>
        </div>
      </form>
    </div>
  </section>
{% endblock %}
