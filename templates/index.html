{% extends "layout.html" %}

{% block title %}Home{% endblock %}

{% block main %}
  <div class="page-header">
    <div>
      <h1>Welcome to ClubHub</h1>
      <p class="page-subtitle">Official hub for school clubs, events, and announcements.</p>
    </div>
  </div>

  <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));">
    <section class="card h-100">
      <div class="card-header">
        <h3 class="mb-0">Latest Announcements</h3>
        <p class="page-subtitle mb-0">From your clubs and admins</p>
      </div>
      <div class="card-body">
        {% if announcements %}
          <div class="list-group list-group-flush">
            {% for a in announcements %}
              <div class="list-group-item px-0">
                <h5 class="mb-1">{{ a.title }}</h5>
                <div class="card-meta mb-2">
                  <span>by <strong>{{ a.author }}</strong></span>
                  {% if a.club_name %}
                    <span class="badge accent">{{ a.club_name }}</span>
                  {% else %}
                    <span class="badge navy">Global</span>
                  {% endif %}
                  <span>{{ a.created_at }}</span>
                </div>
                <p class="mb-0">{{ a.body }}</p>
              </div>
            {% endfor %}
          </div>
        {% else %}
          <p class="muted mb-0">No announcements yet.</p>
        {% endif %}
      </div>
      <div class="card-footer">
        <a href="/announcements" class="btn btn-sm btn-outline">View all announcements</a>
      </div>
    </section>

    <section class="card h-100">
      <div class="card-header">
        <h3 class="mb-0">Upcoming Events</h3>
        <p class="page-subtitle mb-0">What‚Äôs happening next</p>
      </div>
      <div class="card-body">
        {% if upcoming_events %}
          <div class="list-group list-group-flush">
            {% for e in upcoming_events %}
              <div class="list-group-item px-0">
                <h5 class="mb-1">{{ e.title }}</h5>
                <div class="card-meta">
                  <span>{{ e.start_time | format_datetime }}</span>
                  {% if e.location %}<span>üìç {{ e.location }}</span>{% endif %}
                </div>
              </div>
            {% endfor %}
          </div>
        {% else %}
          <p class="muted mb-0">No upcoming events scheduled.</p>
        {% endif %}
      </div>
      <div class="card-footer">
        <a href="/events" class="btn btn-sm btn-outline">View all events</a>
      </div>
    </section>
  </div>
{% endblock %}
