{% extends "layout.html" %}

{% block title %}Dashboard{% endblock %}

{% block main %}
  <h1>ğŸ‘¤ Dashboard</h1>

  <!-- User Profile Card -->
  <div class="row mb-4">
    <div class="col-md-6">
      <div class="card border-left-primary shadow">
        <div class="card-body">
          <h4 class="mb-3">Welcome, {{ user.username }}! ğŸ‘‹</h4>
          <div class="row">
            <div class="col-sm-6 mb-3">
              <small class="text-muted d-block">Role</small>
              <h6 class="mb-0">
                {% if user.is_officer %}
                  ğŸ”‘ Officer
                {% else %}
                  ğŸ‘¥ Member
                {% endif %}
              </h6>
            </div>
            <div class="col-sm-6 mb-3">
              <small class="text-muted d-block">Total Points</small>
              <h6 class="mb-0">â­ {{ user.points }}</h6>
            </div>
            <div class="col-sm-6">
              <small class="text-muted d-block">Events Attended</small>
              <h6 class="mb-0">ğŸ“… {{ total_attended }}</h6>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Events Section -->
  <h3>ğŸ“… Recent Events Attended</h3>
  {% if attended_events %}
    <div class="row">
      {% for e in attended_events %}
        <div class="col-md-6 mb-3">
          <div class="card">
            <div class="card-body">
              <h6 class="card-title">{{ e.title }}</h6>
              <small class="text-muted d-block mb-2">
                <strong>ğŸ“…</strong> {{ e.start_time | format_datetime }}
              </small>
              {% if e.location %}
                <small class="text-muted d-block">
                  <strong>ğŸ“</strong> {{ e.location }}
                </small>
              {% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info">
      <p class="mb-0">You haven't attended any events yet. Check out our <a href="/events" class="alert-link">upcoming events</a>!</p>
    </div>
  {% endif %}
{% endblock %}
