{% extends "layout.html" %}

{% block title %}Dashboard{% endblock %}

{% block main %}
  <div class="page-header">
    <div>
      <h1>Dashboard</h1>
      <p class="page-subtitle mb-0">Your activity and quick actions</p>
    </div>
  </div>

  <div class="card-grid mb-4">
    <a class="text-decoration-none" href="/clubs">
      <div class="card h-100">
        <div class="card-body d-flex align-items-center">
          <div class="me-3 fs-4">ğŸ›ï¸</div>
          <div>
            <div class="fw-bold">Browse Clubs</div>
            <small class="muted">See all clubs or just yours.</small>
          </div>
        </div>
      </div>
    </a>
    <a class="text-decoration-none" href="/join">
      <div class="card h-100">
        <div class="card-body d-flex align-items-center">
          <div class="me-3 fs-4">ğŸ”‘</div>
          <div>
            <div class="fw-bold">Join with Code</div>
            <small class="muted">Enter an access code to join fast.</small>
          </div>
        </div>
      </div>
    </a>
    <a class="text-decoration-none" href="/events">
      <div class="card h-100">
        <div class="card-body d-flex align-items-center">
          <div class="me-3 fs-4">ğŸ“…</div>
          <div>
            <div class="fw-bold">Upcoming Events</div>
            <small class="muted">Check whatâ€™s happening next.</small>
          </div>
        </div>
      </div>
    </a>
  </div>

  <section class="card mb-4">
    <div class="card-body">
      <h3 class="mb-3">Welcome, {{ user.username }}!</h3>
      <div class="row g-3">
        <div class="col-sm-4">
          <small class="muted d-block">Role</small>
          <div class="fw-semibold">
            {% if user.is_officer %}
              Global Admin
            {% else %}
              Member
            {% endif %}
          </div>
        </div>
        <div class="col-sm-4">
          <small class="muted d-block">Total Points</small>
          <div class="fw-semibold">{{ user.points }}</div>
        </div>
        <div class="col-sm-4">
          <small class="muted d-block">Events Attended</small>
          <div class="fw-semibold">{{ total_attended }}</div>
        </div>
      </div>
    </div>
  </section>

  <section>
    <h3 class="mb-3">Recent Events Attended</h3>
    {% if attended_events %}
      <div class="card-grid">
        {% for e in attended_events %}
          <article class="card">
            <div class="card-body">
              <h4 class="mb-1">{{ e.title }}</h4>
              <div class="card-meta">
                <span>ğŸ“… {{ e.start_time | format_datetime }}</span>
                {% if e.location %}<span>ğŸ“ {{ e.location }}</span>{% endif %}
              </div>
            </div>
          </article>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-info">
        <p class="mb-0">You haven't attended any events yet. Check out our <a href="/events" class="alert-link">upcoming events</a>!</p>
      </div>
    {% endif %}
  </section>
{% endblock %}
